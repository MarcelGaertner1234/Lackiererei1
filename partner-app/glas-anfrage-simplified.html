<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glas-Reparatur | Partner Portal</title>
    <link rel="stylesheet" href="service-form-styles.css">
    <link rel="stylesheet" href="../mobile-responsive.css">
</head>
<body>
    <div class="main-layout">
        <div class="wizard-sidebar">
            <div class="sidebar-title">Fortschritt</div>
            <div class="sidebar-steps" id="sidebarSteps">
                <div class="sidebar-step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Fotos</div>
                    <div class="step-icon"></div>
                </div>
                <div class="sidebar-step pending" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Fahrzeug</div>
                    <div class="step-icon"></div>
                </div>
                <div class="sidebar-step pending" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">Glasart &amp; Schaden</div>
                    <div class="step-icon"></div>
                </div>
                <div class="sidebar-step pending" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">Termin</div>
                    <div class="step-icon"></div>
                </div>
                <div class="sidebar-step pending" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-label">Zusammenfassung</div>
                    <div class="step-icon"></div>
                </div>
            </div>
        </div>

        <div class="container">
            <button id="btnThemeToggle" class="btn btn-theme-toggle" onclick="toggleTheme()" title="Theme wechseln">🌙</button>

            <div class="header">
                <h1>🔍 Neue Glas-Reparatur Anfrage</h1>
                <p id="partnerName">Partner Portal</p>
            </div>

            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 20%;"></div>
                </div>
                <div class="progress-text" id="progressText">Schritt 1 von 5</div>
            </div>

            <div class="wizard-container">
                <!-- Step 1: Fotos -->
                <div class="wizard-step active" data-step="1">
                    <div class="step-title"><span>📸 Glasschaden-Fotos</span></div>
                    <div class="form-group">
                        <label class="photo-upload" for="photoInput">
                            <div class="icon">📷</div>
                            <div class="text">Fotos des Glasschadens hochladen<br><small>(Steinschlag, Riss, etc.)</small></div>
                            <input type="file" id="photoInput" accept="image/*" multiple capture="environment">
                        </label>
                        <div class="photo-preview" id="photoPreview"></div>
                    </div>
                </div>

                <!-- Step 2: Fahrzeug -->
                <div class="wizard-step" data-step="2">
                    <div class="step-title"><span>🚗 Fahrzeug</span></div>
                    <div class="form-group">
                        <label for="kennzeichen">Kennzeichen *</label>
                        <input type="text" id="kennzeichen" placeholder="z.B. MOS-AB 123" required style="text-transform: uppercase;">
                    </div>
                    <div class="form-group">
                        <label for="marke">Marke *</label>
                        <select id="marke" required>
                            <option value="">Bitte wählen...</option>
                            <option value="Audi">Audi</option>
                            <option value="BMW">BMW</option>
                            <option value="Mercedes-Benz">Mercedes-Benz</option>
                            <option value="Volkswagen">Volkswagen</option>
                            <option value="Sonstige">Sonstige</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="modell">Modell *</label>
                        <input type="text" id="modell" placeholder="z.B. Golf 7" required>
                    </div>
                </div>

                <!-- Step 3: Glasart & Schaden -->
                <div class="wizard-step" data-step="3">
                    <div class="step-title"><span>🪟 Glasart & Schaden</span></div>
                    <div class="form-group">
                        <label>Art der Reparatur *</label>
                        <div class="radio-group">
                            <label class="radio-option selected" onclick="selectGlasArt(this, 'steinschlag')">
                                <input type="radio" name="glasArt" value="steinschlag" checked>
                                <div class="label">🔹 Steinschlag reparieren</div>
                                <div class="description">Kleiner Schaden, kann oft repariert werden</div>
                            </label>
                            <label class="radio-option" onclick="selectGlasArt(this, 'riss')">
                                <input type="radio" name="glasArt" value="riss">
                                <div class="label">⚡ Riss/Sprung</div>
                                <div class="description">Größerer Schaden, meist Austausch nötig</div>
                            </label>
                            <label class="radio-option" onclick="selectGlasArt(this, 'ersatz')">
                                <input type="radio" name="glasArt" value="ersatz">
                                <div class="label">🔄 Komplett-Austausch</div>
                                <div class="description">Scheibe muss ersetzt werden</div>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Welche Scheibe? *</label>
                        <div class="toggle-group">
                            <label class="toggle-option selected" onclick="selectScheibenTyp('windschutzscheibe')">
                                <input type="radio" name="scheibenTyp" value="windschutzscheibe" checked>
                                🚗 Windschutzscheibe
                            </label>
                            <label class="toggle-option" onclick="selectScheibenTyp('seitenfenster')">
                                <input type="radio" name="scheibenTyp" value="seitenfenster">
                                🚪 Seitenfenster
                            </label>
                            <label class="toggle-option" onclick="selectScheibenTyp('heckscheibe')">
                                <input type="radio" name="scheibenTyp" value="heckscheibe">
                                🔙 Heckscheibe
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="sensorVorhanden" style="width: 18px; height: 18px; margin-right: 10px;">
                            <span>Regensensor / Spurhalteassistent vorhanden</span>
                        </label>
                    </div>
                </div>

                <!-- Step 4: Termin -->
                <div class="wizard-step" data-step="4">
                    <div class="step-title"><span>📅 Termin</span></div>
                    <div class="form-group">
                        <label>Gewünschter Termin *</label>
                        <div class="termin-grid" id="terminGrid">
                            <div class="loading"><div class="icon">⏳</div><div>Lade verfügbare Termine...</div></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="anmerkungen">Anmerkungen (optional)</label>
                        <textarea id="anmerkungen" placeholder="z.B. Versicherungsschaden, Eilt, etc."></textarea>
                    </div>
                </div>

                <!-- Step 5: Zusammenfassung -->
                <div class="wizard-step" data-step="5">
                    <div class="step-title"><span>✅ Zusammenfassung</span></div>
                    <div id="summaryContent"></div>
                </div>
            </div>

            <div class="wizard-nav">
                <button type="button" class="btn btn-back" id="btnBack" onclick="prevStep()" style="display: none;">← Zurück</button>
                <button type="button" class="btn btn-primary" id="btnNext" onclick="nextStep()">Weiter →</button>
            </div>

            <div class="success-message" id="successMessage">
                <div class="icon">✅</div>
                <h3>Anfrage erfolgreich gesendet!</h3>
                <p>Wir melden uns schnellstmöglich mit einem Kostenvoranschlag bei Ihnen.</p>
                <button class="btn btn-primary" onclick="window.location.href='meine-anfragen.html'">Zu meinen Anfragen</button>
            </div>
        </div>
    </div>



        // Theme Toggle Function
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            const btnToggle = document.getElementById('btnThemeToggle');
            if (btnToggle) {
                btnToggle.textContent = newTheme === 'dark' ? '☀️' : '🌙';
            }
        }

        // Initialize Theme on Load
        (function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            const btnToggle = document.getElementById('btnThemeToggle');
            if (btnToggle) {
                btnToggle.textContent = savedTheme === 'dark' ? '☀️' : '🌙';
            }
        })();
    </script>
</body>
</html>
