<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎭 DEMO | Partner-Anfragen Admin | Auto-Lackierzentrum Mosbach</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }

        /* ========================================
           DEMO BANNER
           ======================================== */

        .demo-banner {
            background: linear-gradient(135deg, #ffd54f 0%, #ffb300 100%);
            border: 3px solid #ff6f00;
            border-radius: 15px;
            padding: 20px 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(255, 111, 0, 0.3);
        }

        .demo-banner h2 {
            color: #e65100;
            font-size: 24px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .demo-banner p {
            color: #bf360c;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .demo-banner ul {
            margin-left: 20px;
            margin-top: 10px;
            color: #bf360c;
        }

        .demo-banner ul li {
            font-size: 13px;
            line-height: 1.8;
        }

        .demo-banner strong {
            color: #bf360c;
            font-weight: 700;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .header h1 {
            color: #003366;
            font-size: 28px;
            margin-bottom: 5px;
        }

        .header p {
            color: #666;
            font-size: 14px;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        .btn-primary {
            background: #003366;
            color: white;
        }

        .btn-primary:hover {
            background: #00509e;
            transform: translateY(-2px);
        }

        .btn-small {
            padding: 8px 12px;
            font-size: 13px;
        }

        .btn:disabled, .btn-primary:disabled {
            background: #ccc !important;
            cursor: not-allowed !important;
            transform: none !important;
        }

        .filter-section {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-group label {
            font-size: 13px;
            font-weight: 600;
            color: #003366;
        }

        .filter-group select {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card .number {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-card .label {
            font-size: 13px;
            opacity: 0.9;
        }

        .anfragen-liste {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .anfrage-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s;
            overflow: hidden;
        }

        .anfrage-card:hover {
            border-color: #003366;
            box-shadow: 0 4px 12px rgba(0,51,102,0.1);
        }

        /* ========================================
           COMPACT CARD VIEW (Stufe 1)
           ======================================== */

        .anfrage-card.collapsed {
            max-height: 220px;
        }

        .anfrage-card.collapsed .detail-grid,
        .anfrage-card.collapsed .photos-section,
        .anfrage-card.collapsed .kva-box,
        .anfrage-card.collapsed .status-actions,
        .anfrage-card.collapsed .schadensbeschreibung,
        .anfrage-card.collapsed .action-buttons {
            display: none;
        }

        .anfrage-card.collapsed .anfrage-grid {
            grid-template-columns: 1fr;
            gap: 0;
        }

        .anfrage-card.collapsed .schadensbeschreibung-short {
            display: block;
            background: #f9f9f9;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 14px;
            color: #666;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .anfrage-card:not(.collapsed) .schadensbeschreibung-short {
            display: none;
        }

        .toggle-card-btn {
            background: #e0e0e0;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.2s;
            color: #666;
        }

        .toggle-card-btn:hover {
            background: #d0d0d0;
            color: #003366;
        }

        .anfrage-card.collapsed .toggle-card-btn {
            transform: rotate(180deg);
        }

        /* ========================================
           QUICK INFO BADGES (Stufe 1.5)
           ======================================== */

        .quick-info-badges {
            display: none;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 12px;
        }

        .anfrage-card.collapsed .quick-info-badges {
            display: flex;
        }

        .info-badge {
            padding: 4px 9px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            white-space: nowrap;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .info-badge.urgent {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #ef5350;
        }

        .info-badge.normal {
            background: #f5f5f5;
            color: #666;
            border: 1px solid #e0e0e0;
        }

        .info-badge.has-photos {
            background: #e3f2fd;
            color: #1565c0;
            border: 1px solid #90caf9;
        }

        .info-badge.has-vin {
            background: #fff3e0;
            color: #e65100;
            border: 1px solid #ffb74d;
        }

        .info-badge.karosserie {
            background: #fff3e0;
            color: #e65100;
            border: 1px solid #ff9800;
        }

        .info-badge.abhol {
            background: #fce4ec;
            color: #c2185b;
            border: 1px solid #f06292;
        }

        .info-badge.ersatz {
            background: #e1f5fe;
            color: #0277bd;
            border: 1px solid #4fc3f7;
        }

        .info-badge.original {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #66bb6a;
        }

        .info-badge.zubehoer {
            background: #fff8e1;
            color: #f57f17;
            border: 1px solid #ffca28;
        }

        .info-badge.partner-teil {
            background: #f3e5f5;
            color: #6a1b9a;
            border: 1px solid #ba68c8;
        }

        .anfrage-card.neu {
            border-left: 5px solid #1565c0;
        }

        .anfrage-card.warte_kva {
            border-left: 5px solid #e65100;
        }

        .anfrage-card.kva_gesendet {
            border-left: 5px solid #6a1b9a;
        }

        .anfrage-card.beauftragt {
            border-left: 5px solid #2e7d32;
        }

        .anfrage-card.in_arbeit {
            border-left: 5px solid #0277bd;
        }

        .anfrage-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }

        .anfrage-title {
            font-size: 20px;
            font-weight: 600;
            color: #003366;
            margin-bottom: 5px;
        }

        .anfrage-subtitle {
            font-size: 14px;
            color: #999;
        }

        .status-badge {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            white-space: nowrap;
        }

        .status-badge.neu {
            background: #e3f2fd;
            color: #1565c0;
        }

        .status-badge.warte_kva {
            background: #fff3e0;
            color: #e65100;
        }

        .status-badge.kva_gesendet {
            background: #f3e5f5;
            color: #6a1b9a;
        }

        .status-badge.beauftragt {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .status-badge.in_arbeit {
            background: #e1f5fe;
            color: #0277bd;
        }

        .anfrage-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-bottom: 20px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        @media (max-width: 900px) {
            .anfrage-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- DEMO BANNER -->
        <div class="demo-banner">
            <h2>🎭 DEMO-MODUS | Mock-Daten zur Badge-Visualisierung</h2>
            <p><strong>Dies ist eine Demo-Version mit simulierten Beispieldaten.</strong></p>
            <p>📋 <strong>Darstellung:</strong> 5 Mock-Anfragen mit unterschiedlichen Badge-Kombinationen (siehe Stufe 1.5 Quick Info Badges)</p>
            <ul>
                <li>✅ <strong>Alle Karten standardmäßig kollabiert</strong> – optimale Badge-Ansicht</li>
                <li>🎨 <strong>9 verschiedene Badge-Typen</strong> visualisiert (⚡ EILIG, 📅 Normal, 📷 Fotos, 🔢 VIN, 🔧 Karosserie, 🚚 Abhol/Bring, 🚘 Ersatzwagen, ⭐ Original, 🔧 Zubehör, 📦 Partner)</li>
                <li>🚫 <strong>Buttons deaktiviert</strong> – keine Firebase-Verbindung erforderlich</li>
                <li>🔄 <strong>Toggle-Buttons aktiv</strong> – Karten können expandiert/kollabiert werden</li>
            </ul>
            <p style="margin-top: 12px; font-size: 12px; opacity: 0.9;">ℹ️ Für die produktive Version siehe <a href="admin-anfragen.html" style="color: #bf360c; font-weight: 700;">admin-anfragen.html</a></p>
        </div>

        <div class="header">
            <h1>🏢 Partner-Anfragen Verwaltung (DEMO)</h1>
            <p>Admin-Bereich für Partner-Lackieranfragen – Mock-Daten</p>
        </div>

        <div class="nav-buttons">
            <a href="admin-anfragen.html" class="btn btn-primary">← Zur Produktiv-Version</a>
        </div>

        <!-- Statistics -->
        <div class="stats-row" id="statsRow">
            <div class="stat-card">
                <div class="number" id="statsNeu">1</div>
                <div class="label">Neu</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statsWarteKva">1</div>
                <div class="label">Warte auf KVA</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statsKvaGesendet">1</div>
                <div class="label">KVA gesendet</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statsBeauftragt">1</div>
                <div class="label">Beauftragt</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statsInArbeit">1</div>
                <div class="label">In Arbeit</div>
            </div>
        </div>

        <!-- Filters (disabled in demo) -->
        <div class="filter-section">
            <div class="filter-row">
                <div class="filter-group">
                    <label for="filterStatus">Status filtern:</label>
                    <select id="filterStatus" disabled title="In Demo deaktiviert">
                        <option value="">Alle anzeigen</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filterPartner">Partner filtern:</label>
                    <select id="filterPartner" disabled title="In Demo deaktiviert">
                        <option value="">Alle Partner</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filterDringlichkeit">Dringlichkeit:</label>
                    <select id="filterDringlichkeit" disabled title="In Demo deaktiviert">
                        <option value="">Alle</option>
                    </select>
                </div>
            </div>
        </div>

        <div id="anfrageNListe" class="anfragen-liste">
            <!-- Dynamisch mit Mock-Daten gefüllt -->
        </div>
    </div>

    <script>
        /* ========================================
           MOCK-DATEN (5 Beispiel-Anfragen)
           ======================================== */

        const MOCK_ANFRAGEN = [
            // Mock 1: ALLE BADGES (Vollausstattung)
            {
                id: 'mock_001',
                status: 'neu',
                serviceTyp: 'lackier',
                partnerName: 'Autohaus Müller GmbH',
                timestamp: Date.now(),
                auftragsnummer: 'AH-2024-001',
                schadenBeschreibung: 'Kompletter Neulack Türe links + Stoßstange vorne. Dellen + Kratzer nach Parkrempler. Kund wünscht Originalteile und schnellstmögliche Bearbeitung.',
                dringlichkeit: 'eilig',
                fotos: ['data:image/svg+xml;base64,...', 'data:image/svg+xml;base64,...', 'data:image/svg+xml;base64,...', 'data:image/svg+xml;base64,...', 'data:image/svg+xml;base64,...'],
                vin: 'WVWZZZ1KZBW123456',
                karosseriearbeiten: 'ja',
                abholserviceGewuenscht: true,
                ersatzfahrzeugGewuenscht: true,
                ersatzteilPraeferenz: 'originalteil'
            },
            // Mock 2: Standard (Normal + Fotos + VIN)
            {
                id: 'mock_002',
                status: 'warte_kva',
                serviceTyp: 'mechanik',
                partnerName: 'KFZ-Werkstatt Schmidt',
                timestamp: Date.now() - 3600000,
                kennzeichen: 'MOS-AB 123',
                schadenBeschreibung: 'Kleine Kratzer an Heckklappe, Steinschlag am Kotflügel rechts. Normale Priorität.',
                dringlichkeit: 'normal',
                fotos: ['data:image/svg+xml;base64,...', 'data:image/svg+xml;base64,...'],
                vin: 'WAUZZZ8V7BA123456'
            },
            // Mock 3: EILIG mit Zubehör (wenige Badges)
            {
                id: 'mock_003',
                status: 'kva_gesendet',
                serviceTyp: 'pflege',
                partnerName: 'Autohaus Becker',
                timestamp: Date.now() - 7200000,
                auftragsnummer: 'BK-2024-042',
                schadenBeschreibung: 'Frontschürze komplett neu lackieren nach Wildunfall. Eilig benötigt.',
                dringlichkeit: 'eilig',
                ersatzteilPraeferenz: 'guenstig'
            },
            // Mock 4: Minimal (nur Dringlichkeit Normal)
            {
                id: 'mock_004',
                status: 'beauftragt',
                serviceTyp: 'versicherung',
                partnerName: 'Versicherungs-Partner AG',
                timestamp: Date.now() - 10800000,
                kennzeichen: 'HD-XY 789',
                schadenBeschreibung: 'Lackaufbereitung gesamte rechte Seite nach leichtem Streifschaden.',
                dringlichkeit: 'normal'
            },
            // Mock 5: Partner-Ersatzteil (EILIG + Fotos + Karosserie + Partner)
            {
                id: 'mock_005',
                status: 'in_arbeit',
                serviceTyp: 'lackier',
                partnerName: 'Autohaus Lenz',
                timestamp: Date.now() - 14400000,
                auftragsnummer: 'LZ-2024-089',
                schadenBeschreibung: 'Motorhaube + Kühlergrill nach Auffahrunfall. Ersatzteil vom Partner vorhanden.',
                dringlichkeit: 'eilig',
                fotos: ['data:image/svg+xml;base64,...', 'data:image/svg+xml;base64,...', 'data:image/svg+xml;base64,...'],
                karosseriearbeiten: 'ja',
                ersatzteilPraeferenz: 'gebrauchteil'
            }
        ];

        /* ========================================
           HELPER FUNCTIONS
           ======================================== */

        function getServiceBadge(serviceTyp) {
            const badges = {
                'lackier': { icon: '🎨', label: 'Lackier-Service', color: '#003366' },
                'reifen': { icon: '🚗', label: 'Reifen-Service', color: '#1976d2' },
                'pflege': { icon: '✨', label: 'Fahrzeugpflege', color: '#7b1fa2' },
                'mechanik': { icon: '🔧', label: 'Mechanik', color: '#d32f2f' },
                'tuev': { icon: '✅', label: 'TÜV/AU', color: '#388e3c' },
                'versicherung': { icon: '🛡️', label: 'Versicherung', color: '#f57c00' }
            };
            const badge = badges[serviceTyp] || { icon: '📋', label: 'Service', color: '#666' };
            return `<span style="background: ${badge.color}; color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600; margin-left: 10px;">${badge.icon} ${badge.label}</span>`;
        }

        function getErsatzteilBadge(praeferenz) {
            const badges = {
                'originalteil': '<span class="info-badge original">⭐ Original</span>',
                'guenstig': '<span class="info-badge zubehoer">🔧 Zubehör</span>',
                'gebrauchteil': '<span class="info-badge partner-teil">📦 Partner</span>'
            };
            return badges[praeferenz] || '';
        }

        function truncateText(text, maxLength) {
            if (!text) return '';
            return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
        }

        function toggleCardCollapse(anfrageId, event) {
            if (event) event.stopPropagation();

            const card = document.querySelector(`.anfrage-card[data-anfrage-id="${anfrageId}"]`);
            if (!card) return;

            const isCollapsed = card.classList.toggle('collapsed');

            const icon = card.querySelector('.toggle-card-btn');
            if (icon) {
                icon.title = isCollapsed ? 'Details anzeigen' : 'Details verstecken';
            }
        }

        function createAnfrageCard(anfrage) {
            const card = document.createElement('div');
            card.className = 'anfrage-card collapsed ' + anfrage.status; // ALL COLLAPSED by default
            card.setAttribute('data-anfrage-id', anfrage.id);

            const datum = new Date(anfrage.timestamp).toLocaleDateString('de-DE', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            const statusTexte = {
                'neu': 'Neu eingegangen',
                'warte_kva': 'In Prüfung',
                'kva_gesendet': 'Angebot erstellt',
                'beauftragt': 'Beauftragt',
                'in_arbeit': 'In Lackierung'
            };

            const shortDescription = truncateText(anfrage.schadenBeschreibung, 80);

            card.innerHTML = `
                <div class="anfrage-header">
                    <div>
                        <div class="anfrage-title">${anfrage.auftragsnummer || anfrage.kennzeichen || 'Fahrzeug'}${getServiceBadge(anfrage.serviceTyp)}</div>
                        <div class="anfrage-subtitle">
                            ${anfrage.partnerName} • ${datum}
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <button class="toggle-card-btn" onclick="toggleCardCollapse('${anfrage.id}', event)" title="Details anzeigen">
                            ▼
                        </button>
                        <div class="status-badge ${anfrage.status}">
                            ${statusTexte[anfrage.status] || anfrage.status}
                        </div>
                    </div>
                </div>

                <!-- Short description for collapsed view -->
                <div class="schadensbeschreibung-short">
                    ${shortDescription}
                </div>

                <!-- Quick Info Badges (Stufe 1.5) -->
                <div class="quick-info-badges">
                    ${anfrage.dringlichkeit === 'eilig' ? '<span class="info-badge urgent">⚡ EILIG</span>' : '<span class="info-badge normal">📅 Normal</span>'}
                    ${anfrage.fotos && anfrage.fotos.length > 0 ? `<span class="info-badge has-photos">📷 ${anfrage.fotos.length} Fotos</span>` : ''}
                    ${anfrage.vin ? '<span class="info-badge has-vin">🔢 VIN</span>' : ''}
                    ${anfrage.karosseriearbeiten === 'ja' ? '<span class="info-badge karosserie">🔧 Karosserie</span>' : ''}
                    ${anfrage.abholserviceGewuenscht ? '<span class="info-badge abhol">🚚 Abhol/Bring</span>' : ''}
                    ${anfrage.ersatzfahrzeugGewuenscht ? '<span class="info-badge ersatz">🚘 Ersatzwagen</span>' : ''}
                    ${anfrage.ersatzteilPraeferenz ? getErsatzteilBadge(anfrage.ersatzteilPraeferenz) : ''}
                </div>

                <div class="anfrage-grid">
                    <div style="padding: 20px; background: #f9f9f9; border-radius: 8px;">
                        <p style="color: #666; font-size: 14px; line-height: 1.6;">
                            <strong>📋 Beschreibung:</strong><br>
                            ${anfrage.schadenBeschreibung}
                        </p>
                        ${anfrage.vin ? `
                            <p style="margin-top: 15px; color: #e65100; font-weight: 600; font-family: monospace;">
                                🔢 VIN: ${anfrage.vin}
                            </p>
                        ` : ''}
                    </div>
                    <div style="padding: 20px; background: #fff3e0; border-radius: 8px; border-left: 4px solid #ff9800;">
                        <p style="color: #e65100; font-weight: 600; margin-bottom: 10px;">🎭 DEMO-MODUS</p>
                        <p style="color: #666; font-size: 13px;">In der Produktiv-Version stehen hier weitere Details und Aktionen zur Verfügung.</p>
                    </div>
                </div>
            `;

            // Disable click navigation in demo
            card.onclick = (e) => {
                if (!e.target.closest('.toggle-card-btn')) {
                    alert('🎭 DEMO-MODUS: Navigation zu Detail-Seite deaktiviert.\n\nIn der Produktiv-Version würde hier die anfrage-detail.html geöffnet.');
                }
            };

            return card;
        }

        /* ========================================
           INITIALIZATION
           ======================================== */

        window.addEventListener('DOMContentLoaded', () => {
            const liste = document.getElementById('anfrageNListe');

            // Render all mock cards
            MOCK_ANFRAGEN.forEach(anfrage => {
                const card = createAnfrageCard(anfrage);
                liste.appendChild(card);
            });

            console.log('🎭 DEMO-MODUS aktiv | 5 Mock-Anfragen geladen | Alle Badges visualisiert');
        });
    </script>
</body>
</html>
