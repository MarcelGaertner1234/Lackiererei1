<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wissensdatenbank Seeding | Auto-Lackierzentrum Mosbach</title>

    <!-- üåì FOUC Prevention: Load Theme BEFORE CSS -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 16px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #333;
        }

        p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            color: #856404;
        }

        .btn {
            padding: 14px 28px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-right: 10px;
        }

        .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .log {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
        }

        .log-entry {
            margin-bottom: 8px;
            padding: 4px 0;
        }

        .log-success {
            color: #28a745;
        }

        .log-error {
            color: #dc3545;
        }

        .log-info {
            color: #17a2b8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Wissensdatenbank Seeding</h1>
        <p>Dieses Tool erstellt automatisch Sample-Daten f√ºr die Wissensdatenbank.</p>

        <div class="warning">
            <strong>‚ö†Ô∏è Achtung:</strong> Dieses Tool erstellt 10 Richtlinien, 5 Mitteilungen, 3 Schicht√ºbergaben und 5 Demontage-Anleitungen in der Firestore-Datenbank.
            F√ºhren Sie dies nur einmal aus!
        </div>

        <div>
            <button class="btn" onclick="seedData()">üöÄ Daten erstellen</button>
            <button class="btn btn-secondary" onclick="safeNavigate('wissensdatenbank.html')">Zur Wissensdatenbank</button>
        </div>

        <div id="log" class="log" style="display: none;">
            <!-- Log entries will be added here -->
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

    <!-- Listener Registry (f√ºr safeNavigate) -->
    <script src="listener-registry.js"></script>

    <!-- Firebase Config -->
    <script src="firebase-config.js"></script>

    <script>
        // Pre-initialize werkstattId
        const storedUser = JSON.parse(localStorage.getItem('user') || 'null');
        window.werkstattId = (storedUser && storedUser.werkstattId) || 'mosbach';

        const logDiv = document.getElementById('log');

        function log(message, type = 'info') {
            logDiv.style.display = 'block';
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        async function seedData() {
            log('üöÄ Starte Seeding-Prozess...', 'info');

            // Wait for Firebase - CRITICAL FIX: Await the Promise correctly!
            // window.firebaseInitialized ist ein Promise, nicht ein Boolean
            // Der alte Code pr√ºfte !window.firebaseInitialized, aber ein Promise ist IMMER truthy
            try {
                log('‚è≥ Warte auf Firebase-Initialisierung...', 'info');

                // Timeout-Wrapper f√ºr das Promise
                const timeoutPromise = new Promise((_, reject) => {
                    setTimeout(() => reject(new Error('Firebase initialization timeout')), 10000);
                });

                const result = await Promise.race([window.firebaseInitialized, timeoutPromise]);

                if (result === false) {
                    log('‚ùå Firebase initialization failed!', 'error');
                    return;
                }
            } catch (error) {
                log(`‚ùå Firebase initialization timeout! ${error.message}`, 'error');
                return;
            }

            log('‚úÖ Firebase initialisiert', 'success');
            log(`üìç Werkstatt-ID: ${window.werkstattId}`, 'info');

            try {
                // Create Guidelines
                await seedGuidelines();

                // Create Announcements
                await seedAnnouncements();

                // Create Shift Handovers
                await seedHandovers();

                // Create Demontage Anleitungen
                await seedDemontageAnleitungen();

                log('', 'info');
                log('üéâ SEEDING ABGESCHLOSSEN!', 'success');
                log('‚úÖ 10 Richtlinien erstellt', 'success');
                log('‚úÖ 5 Mitteilungen erstellt', 'success');
                log('‚úÖ 3 Schicht√ºbergaben erstellt', 'success');
                log('‚úÖ 5 Demontage-Anleitungen erstellt', 'success');
                log('', 'info');
                log('üëâ Klicken Sie auf "Zur Wissensdatenbank" um die Daten anzuzeigen.', 'info');

            } catch (error) {
                log(`‚ùå Fehler: ${error.message}`, 'error');
                console.error(error);
            }
        }

        async function seedGuidelines() {
            log('üìñ Erstelle Richtlinien...', 'info');

            const guidelines = [
                {
                    title: 'Lackierkabine Sicherheitsprotokoll',
                    category: 'sicherheit',
                    content: `WICHTIG: Vor Betreten der Lackierkabine

1. Schutzausr√ºstung anlegen:
   - Atemschutzmaske FFP2 oder besser
   - Schutzbrille
   - Schutzhandschuhe (Nitril)
   - Lackieroverall

2. Bel√ºftungssystem pr√ºfen:
   - Absauganlage aktivieren (mindestens 2 Minuten Vorlauf)
   - Luftstrom kontrollieren
   - Filter-Status √ºberpr√ºfen (max. 6 Monate alt)

3. Notfallausr√ºstung:
   - Feuerl√∂scher griffbereit (neben Kabinent√ºr)
   - Augendusche funktionsf√§hig
   - Notausschalter bekannt

GEFAHR: Explosionsgefahr bei Lackd√§mpfen!
Niemals rauchen oder offenes Feuer in der N√§he!`,
                    tags: ['lackierung', 'sicherheit', 'kabine'],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    readBy: [],
                    viewCount: 0
                },
                {
                    title: 'Fahrzeugannahme Checkliste',
                    category: 'prozesse',
                    content: `Standard-Ablauf bei Fahrzeugannahme:

SCHRITT 1: Kundengespr√§ch
- Schaden/Wunsch genau dokumentieren
- Erwartungen kl√§ren
- Liefertermin abstimmen
- Kontaktdaten pr√ºfen

SCHRITT 2: Fahrzeuginspektion
- Rundgang mit Fotos (mindestens 8 Ansichten)
- Vorsch√§den fotografieren und dokumentieren
- Kilometerstand notieren
- Tankf√ºllung festhalten

SCHRITT 3: Kostenvoranschlag
- Material kalkulieren
- Arbeitszeit sch√§tzen
- Ggf. Gutachter informieren
- KVA erstellen und vom Kunden unterschreiben lassen

SCHRITT 4: Digitale Erfassung
- Alle Daten in System eingeben
- Fotos hochladen
- Status auf "In Bearbeitung" setzen

WICHTIG: Kunde erh√§lt automatisch E-Mail mit Annahmebest√§tigung!`,
                    tags: ['prozess', 'annahme', 'kundenservice'],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    readBy: [],
                    viewCount: 0
                },
                {
                    title: 'Qualit√§tskontrolle vor Auslieferung',
                    category: 'qualitaet',
                    content: `Checkliste f√ºr finale Qualit√§tspr√ºfung:

LACKIERUNG:
‚ñ° Farbton stimmt √ºberein (bei Tageslicht pr√ºfen)
‚ñ° Keine L√§ufer oder Orangenhaut
‚ñ° Keine Staubeinschl√ºsse
‚ñ° √úbergang zu Originallack nicht sichtbar
‚ñ° Hochglanz bei allen Lackarten

KAROSSERIE:
‚ñ° Spaltma√üe gleichm√§√üig
‚ñ° Keine Dellen oder Beulen
‚ñ° T√ºren schlie√üen einwandfrei
‚ñ° Gummidichtungen korrekt montiert

REINIGUNG:
‚ñ° Fahrzeug komplett gewaschen (innen & au√üen)
‚ñ° Keine Schleifstaubreste
‚ñ° Scheiben streifenfrei
‚ñ° Fu√ümatten gereinigt oder ausgetauscht

DOKUMENTATION:
‚ñ° Vorher-/Nachher-Fotos gemacht
‚ñ° Rechnung vorbereitet
‚ñ° Garantieschein ausgef√ºllt

Erst nach vollst√§ndiger Pr√ºfung Status auf "Fertig" setzen!`,
                    tags: ['qualit√§t', 'auslieferung', 'kontrolle'],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    readBy: [],
                    viewCount: 0
                },
                {
                    title: 'Kommunikation mit Kunden',
                    category: 'kommunikation',
                    content: `Grundregeln f√ºr professionelle Kundenkommunikation:

E-MAIL:
- Innerhalb von 4 Stunden antworten (w√§hrend Gesch√§ftszeiten)
- H√∂flich und professionell formulieren
- Rechtschreibung pr√ºfen
- Immer Betreff angeben

TELEFON:
- Freundlich melden: "Auto-Lackierzentrum Mosbach, [Name], guten Tag!"
- Aktiv zuh√∂ren, nicht unterbrechen
- Notizen machen
- Bei technischen Fragen: R√ºckruf ank√ºndigen statt raten

PERS√ñNLICH:
- Blickkontakt halten
- Kunde ausreden lassen
- Fachbegriffe erkl√§ren
- L√∂sungen anbieten, nicht Probleme betonen

BESCHWERDEN:
- Ruhig bleiben, nicht rechtfertigen
- Entschuldigung aussprechen
- L√∂sung finden
- Vorgesetzten informieren bei gr√∂√üeren Problemen

TIPP: Zufriedene Kunden sind die beste Werbung!`,
                    tags: ['kommunikation', 'kundenservice', 'telefon'],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    readBy: [],
                    viewCount: 0
                },
                {
                    title: 'Spritzpistole Wartung & Reinigung',
                    category: 'prozesse',
                    content: `T√§gliche Reinigung nach Gebrauch:

SOFORT NACH LACKIERUNG:
1. Restlack in Beh√§lter zur√ºckgie√üen
2. Becher mit Verd√ºnnung aussp√ºlen (3x)
3. Kurz durchspritzen (Testkarton)
4. D√ºse mit Pinsel reinigen
5. Luftkappe abschrauben und einweichen

W√ñCHENTLICHE TIEFENREINIGUNG:
1. Pistole komplett zerlegen
2. Alle Teile in Reinigungsbad (2 Stunden)
3. Mit B√ºrste nacharbeiten
4. Mit Druckluft trocknen
5. D√ºse und Nadel auf Verschlei√ü pr√ºfen
6. Schmieren (nur spezielle Pistolenfette!)
7. Wieder zusammenbauen

H√ÑUFIGE FEHLER:
‚ùå Keine Verd√ºnnung durch D√ºse spritzen
‚ùå Pistole √ºber Nacht dreckig lassen
‚ùå Falsche Reinigungsmittel (greift Dichtungen an)
‚ùå Zu hoher Druck beim Durchblasen

Bei Verstopfung NIEMALS mit Metallgegenst√§nden stechen!
‚Üí D√ºse ausbauen und in Reinigungsbad einlegen`,
                    tags: ['wartung', 'werkzeug', 'lackierung'],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    readBy: [],
                    viewCount: 0
                },
                {
                    title: 'Arbeitszeiten & Pausenregelung',
                    category: 'kommunikation',
                    content: `Offizielle Arbeitszeiten:

FR√úHSCHICHT: 06:00 - 14:00 Uhr
- Pause: 09:00 - 09:15 Uhr (15 Min.)
- Mittagspause: 11:30 - 12:00 Uhr (30 Min.)

SP√ÑTSCHICHT: 14:00 - 22:00 Uhr
- Pause: 16:30 - 16:45 Uhr (15 Min.)
- Abendbrot: 19:00 - 19:30 Uhr (30 Min.)

WICHTIGE REGELN:
‚úì Zeiterfassung: Start/Pause/Ende immer eintragen
‚úì Bei Versp√§tung: Sofort anrufen (nicht WhatsApp!)
‚úì Pausenraum aufr√§umen
‚úì Keine privaten T√§tigkeiten w√§hrend Arbeitszeit

√úBERSTUNDEN:
- Nur nach Absprache mit Vorgesetztem
- Werden automatisch erfasst
- Ausgleich: Freizeitausgleich oder Auszahlung

KRANKMELDUNG:
- Bis sp√§testens 06:00 Uhr telefonisch
- Ab 3. Tag: Krankschreibung erforderlich
- Bei R√ºckkehr: Gelben Schein abgeben`,
                    tags: ['arbeitszeit', 'pause', 'zeiterfassung'],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    readBy: [],
                    viewCount: 0
                },
                {
                    title: 'Notfall & Erste Hilfe',
                    category: 'sicherheit',
                    content: `NOTFALLNUMMERN:

üö® Notruf: 112 (Feuerwehr & Rettungsdienst)
üöë Giftnotruf: 0761 19240
üë®‚Äç‚öïÔ∏è Betriebsarzt: 06261 123456
üî• Feuerl√∂scher-Standorte: Werkstatt-Eingang, Kabinent√ºr, B√ºro

ERSTE-HILFE-KOFFER:
- Standort: Pausenraum (an der Wand)
- Ersthelfer: Max M√ºller, Anna Schmidt
- N√§chstes Krankenhaus: 5 Min. Fahrt

BEI UNF√ÑLLEN:
1. Ruhe bewahren
2. Unfallstelle sichern
3. Erste Hilfe leisten
4. Notruf absetzen (112)
5. Vorgesetzten informieren
6. Unfallbericht ausf√ºllen (Formular im B√ºro)

H√ÑUFIGE NOTF√ÑLLE:
- Lackspritzer im Auge ‚Üí Augendusche (15 Min!)
- Schnitt/Verbrennung ‚Üí Wundversorgung
- Ohnmacht ‚Üí Stabile Seitenlage, Notruf
- Feuer ‚Üí Feuerl√∂scher, evtl. evakuieren

WICHTIG: Jeder Unfall muss gemeldet werden, auch Bagatellen!`,
                    tags: ['sicherheit', 'notfall', 'erste-hilfe'],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    readBy: [],
                    viewCount: 0
                },
                {
                    title: 'Materialbestellung & Lagerung',
                    category: 'prozesse',
                    content: `Prozess f√ºr Material-Nachbestellung:

BESTELLUNG:
1. Materialbestand pr√ºfen (mind. 1x pro Woche)
2. Bei Unterschreitung Mindestbestand: Bestellliste erstellen
3. √úber System bestellen oder B√ºro informieren
4. Liefertermin notieren

WARENANNAHME:
1. Lieferung auf Vollst√§ndigkeit pr√ºfen
2. Bei Besch√§digung: Sofort Foto + Vermerk auf Lieferschein
3. Artikel im System einbuchen
4. Ordnungsgem√§√ü einlagern

LAGERUNG LACKIERMATERIALIEN:
- K√ºhl und trocken (10-25¬∞C)
- Vor Sonnenlicht sch√ºtzen
- Beschriftung leserlich
- Angebrochene Dosen verschlie√üen
- MHD beachten!

SONDERABF√ÑLLE:
‚ö†Ô∏è Leere Lackdosen ‚Üí Sonderm√ºll-Container (hinterm Geb√§ude)
‚ö†Ô∏è L√∂sungsmittel ‚Üí In gekennzeichnete Kanister
‚ö†Ô∏è √ñlverschmutzte Lappen ‚Üí Feuerfester Beh√§lter

Niemals Chemikalien in normalen M√ºll!`,
                    tags: ['material', 'bestellung', 'lagerung'],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    readBy: [],
                    viewCount: 0
                },
                {
                    title: 'Smart Repair Techniken',
                    category: 'qualitaet',
                    content: `Spot Repair / Smart Repair Anwendung:

WANN ANWENDBAR:
‚úì Kleine Kratzer (max. 5cm)
‚úì Steinschl√§ge
‚úì Parkrempler ohne Delle
‚úì Einzelne Lackfehler

NICHT ANWENDBAR:
‚ùå Durchrostung
‚ùå Gr√∂√üere Sch√§den (> 10cm)
‚ùå Strukturierte Kunststoffteile
‚ùå Kanten/Rundungen

VORGEHENSWEISE:
1. Schaden abschleifen (P600 ‚Üí P1000 ‚Üí P1500)
2. Entfetten
3. Grundierung (falls bis Metall)
4. Farbton anmischen
5. Spot-Lackierung (3-5 Schichten)
6. Klarlack auftragen
7. Finish: Polieren mit P2000 + P3000

VORTEILE:
+ Schneller (1-2 Stunden statt 1 Tag)
+ G√ºnstiger f√ºr Kunden
+ Erh√§lt Originalsubstanz
+ Kein Zusammenbau n√∂tig

QUALIT√ÑTSKRITERIUM:
√úbergang darf bei Arml√§nge Abstand nicht sichtbar sein!`,
                    tags: ['smart-repair', 'technik', 'lackierung'],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    readBy: [],
                    viewCount: 0
                },
                {
                    title: 'Digitale Tools & Software',
                    category: 'kommunikation',
                    content: `√úbersicht der verwendeten Software:

FAHRZEUGANNAHME-APP:
- Fahrzeuge erfassen mit Fotos
- Status-Tracking (Kanban-Board)
- Kundenkommunikation
- Zeiterfassung

WISSENSDATENBANK (NEU):
- Richtlinien & SOPs
- Team-Mitteilungen
- Schicht√ºbergaben

ZEITERFASSUNG:
- Start/Pause/Ende Button in Dienstplan-App
- Automatische SOLL/IST-Vergleich
- Stundennachweise mit Unterschrift

WICHTIGE FUNKTIONEN:
üì∏ Fotos direkt hochladen
üìä Echzeit-Statistiken
üì± Funktioniert auf Smartphone & Tablet
‚òÅÔ∏è Alle Daten in Cloud gesichert

SUPPORT:
- Bei Problemen: Admin-Dashboard ‚Üí Support-Button
- Oder: info@auto-lackierzentrum.de
- Telefon: 06261 123456

TIPP: App auf Homescreen speichern f√ºr schnellen Zugriff!`,
                    tags: ['software', 'tools', 'app'],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    readBy: [],
                    viewCount: 0
                }
            ];

            for (const guideline of guidelines) {
                await window.getCollection('guidelines').add(guideline);
                log(`‚úÖ Richtlinie erstellt: ${guideline.title}`, 'success');
            }
        }

        async function seedAnnouncements() {
            log('üì¢ Erstelle Mitteilungen...', 'info');

            const announcements = [
                {
                    title: 'Neue Lackierkabine ab n√§chster Woche',
                    category: 'wichtig',
                    content: `Ab Montag, 13.11.2025 ist die neue Lackierkabine einsatzbereit!

Wichtige √Ñnderungen:
- Modernere Absauganlage (50% leiser)
- Bessere Ausleuchtung (LED statt Halogen)
- Touchscreen-Steuerung
- Automatische Temperaturregelung

Einweisung: Freitag 14:00 Uhr f√ºr alle Mitarbeiter

Alte Kabine bleibt als Backup bestehen.`,
                    pinned: true,
                    author: { uid: 'admin', name: 'Admin' },
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    comments: [],
                    reactions: { thumbsUp: 5, heart: 2 }
                },
                {
                    title: 'Betriebsausflug 2026',
                    category: 'info',
                    content: `Planung f√ºr Betriebsausflug l√§uft!

Termin: Samstag, 15. M√§rz 2026
Ziel: Noch offen - Eure Vorschl√§ge sind gefragt!

Bitte bis Ende November Ideen einreichen:
- Bowling + BBQ
- Wanderung + H√ºtteneinkehr
- Paintball
- Escape Room
- ???

Abstimmung im Dezember!`,
                    pinned: false,
                    author: { uid: 'admin', name: 'Admin' },
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    comments: [],
                    reactions: { thumbsUp: 8, heart: 3 }
                },
                {
                    title: 'Parksituation vor der Werkstatt',
                    category: 'wichtig',
                    content: `Bitte beachten:

Die Parkpl√§tze direkt vor der Werkstatt sind NUR f√ºr Kundenfahrzeuge!

Mitarbeiter bitte auf den Parkpl√§tzen hinterm Geb√§ude parken.

Danke f√ºr's Verst√§ndnis!`,
                    pinned: false,
                    author: { uid: 'admin', name: 'Admin' },
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    comments: [],
                    reactions: { thumbsUp: 4, heart: 0 }
                },
                {
                    title: 'Mitarbeiter des Monats: Max M√ºller',
                    category: 'info',
                    content: `Herzlichen Gl√ºckwunsch an Max M√ºller!

Ausgezeichnet f√ºr:
‚úì Besonders sorgf√§ltige Arbeit
‚úì Hilfsbereitschaft gegen√ºber Kollegen
‚úì Perfekte Kundenr√ºckmeldungen

Belohnung: 100‚Ç¨ Bonus + Urkunde

Weiter so, Max! üëè`,
                    pinned: false,
                    author: { uid: 'admin', name: 'Admin' },
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    comments: [
                        {
                            author: { uid: 'user1', name: 'Anna Schmidt' },
                            text: 'Verdient! Gl√ºckwunsch Max! üéâ',
                            timestamp: new Date()  // serverTimestamp() nicht erlaubt in Arrays
                        }
                    ],
                    reactions: { thumbsUp: 12, heart: 8 }
                },
                {
                    title: 'Winterreifen-Saison startet',
                    category: 'schichtwechsel',
                    content: `Ab sofort Winterreifen-Wechsel aktiv bewerben!

Kunden beim Abholen ansprechen:
"Haben Sie schon an den Winterreifen-Wechsel gedacht?"

Sonderaktion: Wechsel + Einlagerung f√ºr 49‚Ç¨ (statt 69‚Ç¨)

G√ºltig bis Ende November.`,
                    pinned: false,
                    author: { uid: 'admin', name: 'Admin' },
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    comments: [],
                    reactions: { thumbsUp: 3, heart: 0 }
                }
            ];

            for (const announcement of announcements) {
                await window.getCollection('announcements').add(announcement);
                log(`‚úÖ Mitteilung erstellt: ${announcement.title}`, 'success');
            }
        }

        async function seedHandovers() {
            log('üîÑ Erstelle Schicht√ºbergaben...', 'info');

            const handovers = [
                {
                    datum: '08.11.2025',
                    schicht: 'Fr√ºhschicht (06:00-14:00)',
                    mitarbeiterId: 'M001',
                    mitarbeiterName: 'Max M√ºller',
                    notes: {
                        offeneAufgaben: `BMW 320d (Kennzeichen: HD-MM 123):
- Lackierung Kotfl√ºgel l√§uft noch bis ca. 16:00 Uhr
- Kunde will morgen abholen, bitte Qualit√§tskontrolle nicht vergessen!

Mercedes E-Klasse (Kennzeichen: MA-AB 456):
- Wartet auf Ersatzteil (Sto√üstange), Lieferung heute Nachmittag erwartet`,
                        probleme: `Spritzpistole Nr. 2 verstopft, braucht Tiefenreinigung.
Habe sie in Reinigungsbad eingelegt, bitte heute Abend fertigstellen.

Kompressor macht komische Ger√§usche, eventuell Filter pr√ºfen?`,
                        wichtigeInfo: `VIP-Kunde Herr Schmidt kommt morgen 09:00 Uhr zur Abholung (Porsche 911).
Fahrzeug steht bereit, aber bitte nochmal finale Politur machen!`
                    },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    readBy: []
                },
                {
                    datum: '07.11.2025',
                    schicht: 'Sp√§tschicht (14:00-22:00)',
                    mitarbeiterId: 'M002',
                    mitarbeiterName: 'Anna Schmidt',
                    notes: {
                        offeneAufgaben: `Audi A4 Smart Repair fertiggestellt, kann morgen abgeholt werden.

VW Golf Hagelschaden-Reparatur: 3 von 8 Dellen entfernt, Rest morgen.`,
                        probleme: `Kundentermin f√ºr Frau Meier wurde verschoben von Freitag auf Montag.
Bitte in System aktualisieren!`,
                        wichtigeInfo: `Neue Lieferung Lackmaterial ist angekommen, steht noch unausgepackt im Lager.`
                    },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    readBy: ['M001']
                },
                {
                    datum: '06.11.2025',
                    schicht: 'Fr√ºhschicht (06:00-14:00)',
                    mitarbeiterId: 'M003',
                    mitarbeiterName: 'Thomas Weber',
                    notes: {
                        offeneAufgaben: `Keine dringenden offenen Aufgaben.
Regul√§rer Workflow, alle Fahrzeuge im Plan.`,
                        probleme: `Keine besonderen Probleme.`,
                        wichtigeInfo: `Heizung in Kabine 1 war defekt, Techniker war da, funktioniert jetzt wieder.

Reminder: Morgen kommt Sicherheitsbeauftragter zur Inspektion.`
                    },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    readBy: ['M001', 'M002']
                }
            ];

            for (const handover of handovers) {
                await window.getCollection('shift_handovers').add(handover);
                log(`‚úÖ Schicht√ºbergabe erstellt: ${handover.datum} - ${handover.mitarbeiterName}`, 'success');
            }
        }

        async function seedDemontageAnleitungen() {
            log('üîß Erstelle Demontage-Anleitungen...', 'info');

            const anleitungen = [
                {
                    title: 'Sto√üstange vorne demontieren',
                    fahrzeug: {
                        marke: 'VW',
                        modell: 'Golf',
                        generation: '7 (2012-2020)'
                    },
                    bauteil: 'demontage_karosserie',
                    difficulty: 'leicht',
                    estimatedTime: '30-45 Minuten',
                    tools: ['Torx T25', 'Torx T30', 'Kunststoffhebel', '10er Nuss', 'Schraubendreher flach'],
                    safety: [
                        'Fahrzeug sicher abstellen (Handbremse anziehen)',
                        'Motor ausschalten und Schl√ºssel abziehen',
                        'Batterie NICHT trennen n√∂tig'
                    ],
                    steps: [
                        {
                            order: 1,
                            title: 'Radlaufverkleidung l√∂sen',
                            description: 'Die 3 Torx T25 Schrauben in der Radlaufverkleidung links und rechts entfernen. Verkleidung leicht nach vorne ziehen.',
                            warnings: [],
                            tips: ['Schrauben in einer Magnetschale sammeln', 'Position markieren f√ºr sp√§teren Einbau'],
                            images: []
                        },
                        {
                            order: 2,
                            title: 'Unterbodenschutz entfernen',
                            description: 'Die 5 Clips am Unterbodenschutz mit dem Kunststoffhebel aushebeln. Vorsichtig arbeiten um Besch√§digungen zu vermeiden.',
                            warnings: ['Clips k√∂nnen brechen - Ersatzclips bereithalten'],
                            tips: ['Mit W√§rme (Hei√üluftf√∂hn) werden Clips flexibler'],
                            images: []
                        },
                        {
                            order: 3,
                            title: 'K√ºhlergrill entfernen',
                            description: 'VW-Emblem dr√ºcken um Motorhaube zu entriegeln. K√ºhlergrill an den Seitenclips aushebeln, dann nach vorne herausziehen.',
                            warnings: ['Vorsicht bei Fahrzeugen mit Parksensor-Kabeln'],
                            tips: ['Von unten nach oben aushebeln ist einfacher'],
                            images: []
                        },
                        {
                            order: 4,
                            title: 'Scheinwerferanschl√ºsse',
                            description: 'Bei Fahrzeugen mit LED-Tagfahrlicht: Stecker der Blinker abziehen. Bei Xenon: Waschanlage-Schlauch abklemmen.',
                            warnings: ['Stecker vorsichtig behandeln - Plastik kann brechen'],
                            tips: [],
                            images: []
                        },
                        {
                            order: 5,
                            title: 'Schrauben l√∂sen',
                            description: 'Zwei Torx T30 Schrauben oben am Sto√üstangentr√§ger entfernen (hinter K√ºhlergrill sichtbar). Eine 10er Schraube je Seite am Kotfl√ºgel-√úbergang.',
                            warnings: [],
                            tips: ['Schrauben beschriften f√ºr einfacheren Zusammenbau'],
                            images: []
                        },
                        {
                            order: 6,
                            title: 'Sto√üstange abnehmen',
                            description: 'Sto√üstange mit gleichm√§√üigem Druck nach vorne ziehen. Am besten zu zweit arbeiten. Auf Kabelb√§ume und Sensoren achten.',
                            warnings: ['Nicht am Nebelscheinwerfer-Gitter ziehen', 'Sensorkabel k√∂nnen noch verbunden sein'],
                            tips: ['Zweite Person h√§lt eine Seite fest', 'Auf Decke/Schaumstoff ablegen'],
                            images: []
                        }
                    ],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    viewCount: 0,
                    readBy: []
                },
                {
                    title: 'Scheinwerfer ausbauen',
                    fahrzeug: {
                        marke: 'BMW',
                        modell: '3er',
                        generation: 'F30/F31 (2012-2019)'
                    },
                    bauteil: 'demontage_beleuchtung',
                    difficulty: 'mittel',
                    estimatedTime: '45-60 Minuten',
                    tools: ['Torx T20', 'Torx T30', '10er Nuss', 'Ratsche', 'Kunststoffhebel'],
                    safety: [
                        'Z√ºndung ausschalten',
                        'Bei Xenon/LED: 5 Minuten warten (Kondensatoren entladen)',
                        'Schutzhandschuhe tragen (Halogenlampen nicht mit blo√üen H√§nden anfassen)'
                    ],
                    steps: [
                        {
                            order: 1,
                            title: 'Motorhaube √∂ffnen',
                            description: 'Motorhaube entriegeln und mit St√ºtze sichern. Bereich um Scheinwerfer inspizieren.',
                            warnings: [],
                            tips: ['Gute Beleuchtung sicherstellen'],
                            images: []
                        },
                        {
                            order: 2,
                            title: 'Luftfilterkasten entfernen (nur links)',
                            description: 'F√ºr linken Scheinwerfer: Luftfilterkasten-Deckel abnehmen und Kasten nach oben herausnehmen f√ºr besseren Zugang.',
                            warnings: [],
                            tips: ['Markierungen f√ºr Wiedereinbau machen'],
                            images: []
                        },
                        {
                            order: 3,
                            title: 'Befestigungsschrauben l√∂sen',
                            description: 'Drei Torx T30 Schrauben oben am Scheinwerfer entfernen. Position merken: zwei vorne, eine hinten.',
                            warnings: ['Scheinwerfer kann nach L√∂sen der Schrauben herausfallen'],
                            tips: ['Mit einer Hand festhalten w√§hrend Schrauben gel√∂st werden'],
                            images: []
                        },
                        {
                            order: 4,
                            title: 'Stecker abziehen',
                            description: 'Elektrische Stecker am Scheinwerfer abziehen. Bei Xenon: Z√ºndger√§t-Stecker vorsichtig l√∂sen. Bei LED: Steuerger√§t-Stecker.',
                            warnings: ['Nicht an Kabeln ziehen - nur an Stecker-Geh√§use'],
                            tips: ['Foto vor Abstecken machen f√ºr sp√§tere Orientierung'],
                            images: []
                        },
                        {
                            order: 5,
                            title: 'Scheinwerfer herausnehmen',
                            description: 'Scheinwerfer vorsichtig nach vorne und dann nach oben herausziehen. Auf Lack achten.',
                            warnings: ['Scheinwerfer ist schwerer als erwartet (LED-Varianten bis 5kg)'],
                            tips: ['Decke unter Fahrzeug legen', 'Auf weicher Unterlage ablegen'],
                            images: []
                        }
                    ],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    viewCount: 0,
                    readBy: []
                },
                {
                    title: 'T√ºrverkleidung abnehmen',
                    fahrzeug: {
                        marke: 'Mercedes',
                        modell: 'C-Klasse',
                        generation: 'W205 (2014-2021)'
                    },
                    bauteil: 'demontage_innenraum',
                    difficulty: 'leicht',
                    estimatedTime: '15-20 Minuten',
                    tools: ['Kunststoffhebel (Plastik-Spachtel)', 'Torx T20', 'Kreuzschraubendreher PH2'],
                    safety: [
                        'Fensterheber-Sicherung ziehen oder Batterie abklemmen',
                        'Keine metallischen Werkzeuge an Airbag-Bereichen verwenden'
                    ],
                    steps: [
                        {
                            order: 1,
                            title: 'Spiegeldreieck entfernen',
                            description: 'Kunststoffabdeckung am Au√üenspiegel-Dreieck aushebeln. Mit flachem Kunststoffhebel von unten ansetzen.',
                            warnings: [],
                            tips: ['Vorsichtig - Clips brechen leicht bei kaltem Wetter'],
                            images: []
                        },
                        {
                            order: 2,
                            title: 'T√ºrgriff-Blende abnehmen',
                            description: 'Kleine Abdeckkappe am T√ºrgriff aushebeln. Darunter befindet sich eine Torx T20 Schraube - entfernen.',
                            warnings: [],
                            tips: ['Schraube nicht fallen lassen - rollt in T√ºrspalt'],
                            images: []
                        },
                        {
                            order: 3,
                            title: 'Schaltereinheit ausbauen',
                            description: 'Fensterheber-Schaltereinheit am hinteren Ende anheben. Stecker abziehen und beiseite legen.',
                            warnings: ['Bei aktivem Strom: Kurzschlussgefahr'],
                            tips: ['Stecker mit Tape markieren'],
                            images: []
                        },
                        {
                            order: 4,
                            title: 'Sichtbare Schrauben entfernen',
                            description: 'Zwei weitere Schrauben in der Griffmulde und am unteren Rand der Verkleidung entfernen.',
                            warnings: [],
                            tips: [],
                            images: []
                        },
                        {
                            order: 5,
                            title: 'Verkleidung aushebeln',
                            description: 'Mit Kunststoffhebel am unteren Rand ansetzen und Clips l√∂sen. Von unten nach oben arbeiten. Zum Schluss Verkleidung nach oben aus der Fensterf√ºhrung heben.',
                            warnings: ['Nicht zu stark hebeln - Clips k√∂nnen abbrechen', 'Kabelverbindungen pr√ºfen bevor komplett abnehmen'],
                            tips: ['Ersatzclips bereithalten', 'Clips vorher mit WD40 einspr√ºhen'],
                            images: []
                        }
                    ],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    viewCount: 0,
                    readBy: []
                },
                {
                    title: 'Motorhaube demontieren',
                    fahrzeug: {
                        marke: 'Audi',
                        modell: 'A4',
                        generation: 'B9 (2015-2024)'
                    },
                    bauteil: 'demontage_karosserie',
                    difficulty: 'mittel',
                    estimatedTime: '20-30 Minuten',
                    tools: ['10er Maulschl√ºssel', '13er Maulschl√ºssel', 'Torx T30', 'Kabelbinder', 'Edding/Marker'],
                    safety: [
                        'Zu zweit arbeiten (Haube ist schwer)',
                        'Motor muss kalt sein',
                        'Decken auf Kotfl√ºgel legen'
                    ],
                    steps: [
                        {
                            order: 1,
                            title: 'Scheibenwaschanlage trennen',
                            description: 'Motorhaube √∂ffnen. Schlauch der Scheibenwaschanlage von den D√ºsen an der Haube abziehen. Mit Kabelbinder markieren f√ºr Wiedereinbau.',
                            warnings: [],
                            tips: ['Schlauchende mit Stopfen verschlie√üen'],
                            images: []
                        },
                        {
                            order: 2,
                            title: 'Scharnier-Position markieren',
                            description: 'Mit Edding die Position der Scharniere auf der Haube markieren. Dies erleichtert die Ausrichtung beim Wiedereinbau erheblich.',
                            warnings: [],
                            tips: ['Beide Seiten markieren', 'Fotos machen'],
                            images: []
                        },
                        {
                            order: 3,
                            title: 'Gasdruckfedern abbauen',
                            description: 'Gasdruckfedern an der Haube aush√§ngen. Kleine Clip-Sicherung entfernen, dann Kugelpfanne abhebeln.',
                            warnings: ['Federn stehen unter Spannung', 'Haube muss gest√ºtzt werden nach Ausbau der Federn'],
                            tips: ['Eine Person h√§lt Haube, andere l√∂st Federn'],
                            images: []
                        },
                        {
                            order: 4,
                            title: 'Scharnierschrauben l√∂sen',
                            description: 'Je zwei 13er Schrauben pro Scharnier l√∂sen. Haube dabei festhalten. Schrauben nicht komplett herausdrehen, sondern nur lockern.',
                            warnings: ['Haube kann nach L√∂sen der Schrauben fallen'],
                            tips: ['Erst alle lockern, dann gemeinsam entfernen'],
                            images: []
                        },
                        {
                            order: 5,
                            title: 'Haube abnehmen',
                            description: 'Zu zweit die Haube vorsichtig nach oben abnehmen. Auf Decke ablegen mit Unterseite nach oben.',
                            warnings: ['Schwer! Mindestens zwei Personen', 'Lack nicht besch√§digen'],
                            tips: ['Am besten auf Motorhaube-Gestell lagern', 'Scharnier-Bereich abkleben'],
                            images: []
                        }
                    ],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    viewCount: 0,
                    readBy: []
                },
                {
                    title: 'Heckleuchte wechseln',
                    fahrzeug: {
                        marke: 'Universal',
                        modell: '',
                        generation: 'Alle Modelle'
                    },
                    bauteil: 'demontage_beleuchtung',
                    difficulty: 'leicht',
                    estimatedTime: '10-15 Minuten',
                    tools: ['Torx T20/T25 (modellabh√§ngig)', 'Kreuzschraubendreher', '10er Nuss', 'Kunststoffhebel'],
                    safety: [
                        'Z√ºndung ausschalten',
                        'Bei nassen Bedingungen: Auf Rutschgefahr achten'
                    ],
                    steps: [
                        {
                            order: 1,
                            title: 'Kofferraum √∂ffnen',
                            description: 'Kofferraum √∂ffnen und Verkleidung/Abdeckung im Bereich der R√ºckleuchte lokalisieren. Oft mit Clips oder Klettverschluss befestigt.',
                            warnings: [],
                            tips: ['Bei manchen Fahrzeugen muss seitliche Verkleidung entfernt werden'],
                            images: []
                        },
                        {
                            order: 2,
                            title: 'Verkleidung entfernen',
                            description: 'Verkleidung vorsichtig abnehmen. Clips merken/fotografieren f√ºr sp√§teren Einbau.',
                            warnings: [],
                            tips: ['Clips bei K√§lte vorher erw√§rmen'],
                            images: []
                        },
                        {
                            order: 3,
                            title: 'Befestigung l√∂sen',
                            description: 'Schrauben oder Fl√ºgelmuttern der R√ºckleuchte entfernen. Meist 2-3 Befestigungspunkte.',
                            warnings: [],
                            tips: ['Schrauben aufbewahren - oft unterschiedliche L√§ngen'],
                            images: []
                        },
                        {
                            order: 4,
                            title: 'Stecker abziehen',
                            description: 'Elektrischen Stecker an der R√ºckleuchte abziehen. Entriegelungslasche dr√ºcken.',
                            warnings: ['Nicht am Kabel ziehen'],
                            tips: [],
                            images: []
                        },
                        {
                            order: 5,
                            title: 'Leuchte herausnehmen',
                            description: 'R√ºckleuchte vorsichtig nach hinten herausziehen. Bei Widerstand: Pr√ºfen ob alle Befestigungen gel√∂st sind.',
                            warnings: ['Dichtung nicht besch√§digen', 'Lack nicht zerkratzen'],
                            tips: ['Leichte Drehbewegung kann helfen', 'Dichtung pr√ºfen und ggf. erneuern'],
                            images: []
                        }
                    ],
                    createdBy: { uid: 'admin', name: 'Admin' },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                    version: 1,
                    isPublished: true,
                    viewCount: 0,
                    readBy: []
                }
            ];

            for (const anleitung of anleitungen) {
                await window.getCollection('demontage_anleitungen').add(anleitung);
                log(`‚úÖ Demontage-Anleitung erstellt: ${anleitung.title}`, 'success');
            }
        }
    </script>
</body>
</html>
