{
  "_meta": {
    "description": "Edge Cases, Known Issues und Defensive Coding Patterns",
    "version": "1.1",
    "lastUpdated": "2025-12-27"
  },

  "documented_edge_cases": {
    "source": "tests/04-edge-cases.spec.js",
    "cases": [
      { "id": "EDGE-1", "description": "Duplikat-Kennzeichen löst Confirm-Dialog aus" },
      { "id": "EDGE-2", "description": "Fehlende Pflichtfelder zeigen Validierungs-Fehler" },
      { "id": "EDGE-3", "description": "Firebase Offline Mode verwendet LocalStorage Fallback" },
      { "id": "EDGE-4", "description": "Ungültiges Datum (Vergangenheit) sollte abgefangen werden" },
      { "id": "EDGE-5", "description": "Leerzeichen im Kennzeichen werden getrimmt" },
      { "id": "EDGE-6", "description": "Baujahr 'Älter' funktioniert korrekt" },
      { "id": "EDGE-7", "description": "Preis mit Komma wird zu Punkt konvertiert" },
      { "id": "EDGE-8", "description": "if-Statement mit nur Kommentar als Body ist Syntax-Fehler", "example": "if (x) // comment", "fix": "Gesamte Zeile auskommentieren: // if (x) comment" }
    ]
  },

  "defensive_coding_stats": {
    "fallback_values": 2180,
    "null_checks": 56,
    "undefined_checks": 237,
    "optional_chaining": "Weit verbreitet (?. und ??)"
  },

  "common_edge_cases": {
    "data": [
      { "case": "Leeres Array", "fix": "if (arr && arr.length > 0)" },
      { "case": "Null/Undefined Objekt", "fix": "obj?.property || default" },
      { "case": "Fehlender DOM-Element", "fix": "element?.value || ''" },
      { "case": "Race Condition", "fix": "await + disabled Button" },
      { "case": "Double-Click", "fix": "btn.disabled = true/false" }
    ],
    "firebase": [
      { "case": "Offline Mode", "fix": "localStorage Fallback" },
      { "case": "Permission Denied", "fix": "try-catch + User-freundliche Meldung" },
      { "case": "Document not found", "fix": ".exists check vor .data()" },
      { "case": "Rate Limiting", "fix": "Exponential Backoff" }
    ],
    "forms": [
      { "case": "Radio ohne Auswahl", "fix": "?.value || 'default'" },
      { "case": "Ungültige Eingabe", "fix": "parseFloat(val) || 0" },
      { "case": "Komma statt Punkt", "fix": "val.replace(',', '.')" },
      { "case": "Whitespace", "fix": ".trim()" }
    ]
  },

  "known_issues": {
    "browser_compatibility": {
      "firefox": "69% Test-Erfolg (vs 100% Chrome)",
      "safari_mobile": "74% Test-Erfolg",
      "note": "Optional Chaining in älteren Browsern problematisch"
    },
    "performance": {
      "kalkulation": "21.693 Zeilen - größte Datei",
      "kanban": "Viele Listener bei vielen Fahrzeugen"
    }
  }
}
